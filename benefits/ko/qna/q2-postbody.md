## Q2. 웹 보안에서 POST Body는 반드시 수집해야 할까요?

## A. 반드시 필요합니다.

정확히 말하면,

> **웹 공격을 판단할 수 있는 유일한 근거가  
> POST Body(요청 본문) 안에 존재하는 경우가 대부분입니다.**

---

## 1️⃣ 왜 Access Log만으로는 부족할까요?

일반적인 웹 서버 Access Log에는 다음 정보가 기록됩니다.

* IP 주소
* 요청 시간
* 요청 메서드 (GET / POST)
* URL 경로
* 응답 코드
* 전송 바이트

예를 들어:

```
POST /login HTTP/1.1 200
```

이 로그만 보면 정상 로그인 요청처럼 보입니다.

그러나 실제 공격은  
**URL이 아니라 Body 안에서 발생합니다.**

---

## 2️⃣ 공격은 어디에 숨어 있을까요?

### 🐞 SQL Injection

```
username=admin' OR 1=1 --
```

### 🐞 Command Injection

```
cmd=cat /etc/passwd
```

### 🐞 XSS

```
comment=<script>alert(1)</script>
```

이 모든 페이로드는

> URL이 아니라 POST Body 안에 존재합니다.

Access Log에는  
이 내용이 기록되지 않습니다.

---

## 3️⃣ Body를 수집하지 않으면 어떤 일이 발생할까요?

Body가 없다면 우리는 이렇게 판단하게 됩니다.

> “200 OK니까 정상 요청이겠지.”
>
> “특별한 URL 요청도 없네.”
>
> “공격은 없었습니다.”

그러나 실제로는

* 인증 우회
* 데이터 탈취
* 관리자 권한 상승
* RCE 실행

이 발생했을 수 있습니다.

**Body가 없으면 공격은 존재하지 않는 것처럼 보입니다.**

---

## 4️⃣ 최신 공격은 왜 Body 중심일까요?

최근 웹 공격은 다음 특징을 가집니다.

* URL은 정상처럼 위장
* HTTPS 암호화 사용
* JSON API 기반 요청
* 대량 POST 기반 데이터 교환

예:

```
POST /api/v2/user/update
Content-Type: application/json
```

실제 공격 코드는 JSON 필드 안에 포함됩니다.

```
{
  "id": "1 OR 1=1",
  "role": "admin"
}
```

Access Log만으로는
이 공격을 식별할 수 없습니다.

---

## 5️⃣ 웹 보안의 현실

많은 조직이 다음과 같이 운영합니다.

* Access Log 수집
* URL 기반 룰 탐지
* 응답 코드 분석

그러나 이것은

> 웹 트래픽의 “표면”만 보는 방식입니다.

공격은  
그 표면 아래, **본문 안에서 발생합니다.**

---

## 6️⃣ HTTPS 환경에서의 문제

HTTPS는 암호화되어 있습니다.

즉,

* 네트워크 장비에서는 본문이 보이지 않습니다.
* 복호화 지점에서만 Body 분석이 가능합니다.

따라서

> 웹 서버 또는 WAF에서 본문을 수집하지 않으면  
> 이후에는 복구할 방법이 없습니다.

---

## 7️⃣ “전체 수집”이 중요한 이유

부분 수집은 위험합니다.

예:

* 8KB까지만 저장
* 특정 파라미터만 저장
* 오류 발생 시 생략

공격자는 이를 악용합니다.

* 페이로드를 뒤쪽에 삽입
* 대용량 JSON 안에 숨김
* 다단계 인코딩 사용

따라서

> **웹 요청 Body는 원본 그대로 전체 수집해야 합니다.**

---

## 8️⃣ 이것이 유일한 방법인 이유

웹 공격 대응 방법은 두 가지뿐입니다.

1. 실시간 차단
2. 사후 포렌식 분석

둘 다 Body가 필요합니다.

Body가 없다면:

* 오탐/미탐 판단 불가
* 공격 재현 불가
* 피해 범위 산정 불가
* 법적 대응 불가

결국

> 웹 본문이 없다면  
> 우리는 “공격이 없었다”고 결론 내릴 가능성이 매우 높습니다.

---

## 9️⃣ 한 문장 정리

> 웹 보안에서 POST Body는 선택 사항이 아닙니다.  
> 공격을 판단할 수 있는 핵심 증거입니다.

---

## 🔟 최종 정리

웹 공격은

* URL이 아니라
* 응답 코드가 아니라
* IP가 아니라

> **요청 본문 안에서 발생합니다.**

웹 본문을 수집하지 않는 보안 체계는

* 탐지 정확도가 낮고
* 사고 분석이 불가능하며
* 실제 침해를 “정상”으로 오판할 위험이 있습니다.

따라서,

> 웹 요청 Body 전체 수집은  
> 웹 공격 대응을 위한 최소 조건입니다.

---
