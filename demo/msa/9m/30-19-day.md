# 필상 시스템 — Day 30 운영 문서화(KB) · 런북 · 교육/훈련

1. **날짜**

* 2024-09-19

2. **목표**

* **지식베이스(KB)·런북·정책/절차 문서**를 표준화해 **검색 3클릭·갱신 24h 이내** 달성
* **온보딩·정기 훈련(Chaos/GameDay)** 체계를 마련하여 **T1 대응 숙달 시간 50%↓**

---

3. **내용**

### A. 리포 구조 & 포맷

```
/docs
  /kb            # 기능/FAQ/트러블슈팅(고객·내부 공용)
  /runbooks      # 서비스/이벤트별 운영 절차
  /policies      # 보안/컴플라이언스/데이터 거버넌스
  /rfcs, /adrs   # 변경·결정 기록(연동)
  /training      # 온보딩/훈련 커리큘럼 & 퀴즈
```

* **포맷**: Markdown(표준 머리말) + 코드블록/쿼리 템플릿 그대로 유지
* **머리말(예)**:

```yaml
title: "ingest-queue-backlog"
tags: ["runbook","ingest","dlq"]
owner: "sre@pil"
last_review: 2025-09-19
severity: T1
kpis: ["ingest_to_incident_p95","dlq_size"]
```

### B. KB 문서 유형 & 기준

* **How-to**(태스크 중심), **Troubleshooting**(증상→원인 Top-N→조치), **Concept**(개념/아키)
* **품질 기준**: 스크린샷/딥링크(대시·API) 포함, **3단 요약(문제/원인/조치)**, i18n(ko/ja/en)
* **신선도 SLA**: 운영/제품 변경 후 **24h 내** 관련 KB/런북 업데이트

### C. 런북 템플릿(요약)

1. **증상**: 경보명·임계치·샘플 스크린샷
2. **가능 원인 Top-5**: 체크 순서/명령어/딥링크
3. **즉시 완화**: 플래그/카나리/샘플링/레이트리밋 키
4. **근본 해결**: 코드/설정 패치·롤백 조건
5. **검증**: SLI/대시·합성 시나리오
6. **커뮤니케이션**: 상태페이지 문안 템플릿
7. **증거화**: EPKG 링크·RCA 필수 항목
8. **소요시간 표준**: MTTA/MTTR 목표치

### D. 작성·리뷰·게시 워크플로우

* **작성자** 누구나 → **문서 오너** 1차 리뷰 → **도메인 오너** 승인(2인 원칙)
* **라벨/태그 규칙**: `svc:ingest`, `region:kr|jp`, `risk:T0~T3`, `audience:internal|customer`
* **자동화**: PR 병합 시

  * (1) **검색 인덱스** 갱신(키워드/태그/요약)
  * (2) 콘솔 **KB 패널** 최신 문서 반영
  * (3) 변경 요약을 **릴리스 노트** 섹션에 자동 삽입

### E. 검색·탐색(콘솔 내 KB 패널)

* **쿼리식**: `svc:search severity:T1 type:runbook`
* **연결**: 인시던트 뷰에서 **룰/서비스/에러코드**로 자동 추천
* **저장 검색**: 역할별 프리셋(ANALYST/SRE/CSIRT)

### F. 교육/훈련

* **온보딩(5일)**:

  * D1 제품·아키, D2 콘솔/티켓, D3 탐지/DBV360, D4 런북 실습, D5 GameDay 미니(모의 T1)
* **정기 훈련**: 월 1회 Chaos/GameDay(케이스 로테이션: Solr 리더 손실, OIDC 장애, 인입 적체 등)
* **평가**: 퀴즈(20문항), 실습(런북 따라 MTTR 측정), **합격선 80점**

### G. 메트릭 & 가드레일

* **문서 커버리지**: 핵심 이벤트/서비스 런북 **100%**
* **검색 성공률**: 3클릭 내 해결 문서 도달율 ≥ **85%**
* **신선도**: `last_review ≤ 30일` 문서 비율 ≥ **95%**
* **훈련 효과**: T1 케이스 MTTR 중앙값 **≤ 45m**, 신규 인력 30일 내 **독자 해결률 70%**
* **품질 알람**: 오래된 문서/깨진 딥링크 자동 경보 → 티켓 생성

### H. 보안·컴플라이언스

* **민감 정보**: 실 로그/키/고객명 **금지**, 필요 시 **서명 URL**·마스킹
* **접근**: 고객용 KB는 테넌트 로그인 필요, 내부 전용은 IP·SSO 제한
* **감사**: `who/what/why/when/hash` 해시체인(문서 열람/다운로드 포함)

### I. 도구/연동

* **MD 린터**(링크/맞춤법/코드블록 언어), **텍스트 스타일 가이드**
* **Snippet 라이브러리**: Solr 쿼리/CLI/플래그 토글 예시 재사용
* **API(발췌)**

  * `GET /v1/kb/search?q=svc:ingest+T1` — 검색
  * `POST /v1/runbooks/{id}:review` — 리뷰 승인
  * `GET /v1/kb/recommend?incident_id=…` — 인시던트 컨텍스트 추천

---

4. **예시 설명 (신규 분석가의 ‘인입 적체’ 대응 20분 완결)**

1) 인시던트 화면에서 **경보 코드** 인식 → KB 패널이 `ingest-queue-backlog` **런북 직접 추천**(클릭-1)
2) 런북의 **즉시 완화** 스텝(샘플링·필드 축소·소비자+2 증설) 실행(클릭-2)
3) 딥링크로 대시 확인(지연·DLQ 감소) 후 **검증 시나리오** 수행(클릭-3) → 정상화
4) **RCA 템플릿** 연결로 원인·조치 기록, EPKG 링크 첨부 → 문서 오너에 **경험 피드백** 제출
   → 결과: 문서/런북·검색·훈련이 엮여 **3클릭·20분 내 수습**이 가능해지고, 지식은 **24h 내 갱신**되어 누적된다.
