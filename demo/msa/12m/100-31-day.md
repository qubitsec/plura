# 필상 시스템 — Day 100 ORR(운영 준비도 검토) · Go/No-Go 게이트 · 종료‧복귀(Exit) 계획

1. **날짜**

* 2024-12-31

2. **목표**

* 릴리스/대규모 변경/신규 테넌트 론칭 전 **운영 준비도(ORR)**를 표준화하고 **Go/No-Go** 결정을 객관화
* **되돌리기 키·DR·SLO·보안/주권·비용** 가드를 통합 점검하여 **실패 없는 배포**, **롤백 ≤ 5분**, **의사결정 TAT ≤ 15분** 달성

---

3. **내용**

### A. ORR 범위 & 트리거

* 트리거: **메이저 릴리스**, 스키마/인덱스/토픽 계약 변경(Day 34/59/76), 모델/룰 대규모 업데이트( Day 50/98 ), 리밸런싱( Day 95 ), BYOK/HYOK 변경( Day 83 ), 피크/동결 전후( Day 77 ).
* 범위: **서비스/데이터/보안/주권/운영/비용** 전 항목.

### B. Go/No-Go 게이트(체크리스트)

1. **SLO/합성( Day 78 )**

   * `ingest→incident p95 ≤ 15s`, `search p95 ≤ 800ms`, `notify p95 ≤ 10s`, 합성 성공률 ≥ 99.5%
2. **가드/되돌리기( Day 93/94 )**

   * 되돌리기 키 등록·자동 시험 통과(롤백 ≤ 5m), `stable` 태그/허용 Digest 고정
3. **보안/주권( Day 85/87 )**

   * Purpose/Region 강제, 교차 전송 **0**, 정책/OPA 테스트 녹색
4. **데이터/스키마( Day 71/76 )**

   * OCSF/SIGMA 정합, EMC 단계/백필 계획, 레이크 뷰 RLS 적용
5. **비용/쿼터( Day 29/72/73 )**

   * 오버리지 예측 < +10%, 완화 시나리오(Throttle/Cache/Flag) 준비
6. **DR/백업( Day 12/64/96 )**

   * PITR·스냅샷·리하이드레이션 리허설 통과, Legal Hold 영향 검토
7. **문서/커뮤니케이션( Day 90/92 )**

   * 상태/공지 템플릿 준비, EventHub 승인 라우팅, 변경 캘린더 등록
8. **투명성/감사( Day 88 )**

   * TLog 포함증명 경로 점검, ORR 산출물 EPKG-ORR로 WORM 보관

> **Fail 조건**: 어느 하나라도 적색(❌) → **No-Go** + RCA/보완 후 재심.

### C. ORR 산출물(필수)

* **ORR 보고서**(요약 1p + 상세 첨부): 변경 개요/리스크/완화/되돌리기/검증 증거 링크
* **결정서**: `Go | No-Go | Go with Guards` + 만료 시각(경과 후 재심 필요)
* **체인지셋**: 배포 항목 목록(아티팩트/플래그/룰/모델), 허용 Digest, 릴노트 링크
* **연락망**: 온콜/SRE/CSIRT/제품/CSM, 에스컬레이션 체인

### D. 의존성·영향 분석( Day 91 SDG 연계)

* SDG 시뮬레이션으로 **Blast Radius**·리스크 스코어 재확인
* `allow_with_guards`인 경우: **카나리 단계/관찰 창/가드 플래그** 자동 주입

### E. 실행 절차(표준)

1. **사전 점검**: ORR 체크리스트 녹색 확인 → EventHub에 `ops.approval` 게시(2인 승인·타임락)
2. **배포/승격**: ACA 자동 카나리( Day 93 ) → `pass` 시 단계 승격, `hold/rollback` 시 즉시 조치
3. **관찰**: 15m–30m 핵심 지표 모니터(합성/Trace Exemplar)
4. **종결**: `prod:stable` 재지정 → ORR EPKG·TLog 링크 공유, 상태페이지/고객 안내(옵션)

### F. Exit/Back-Out(복귀) 계획

* **자동 롤백 경로**: 이미지/룰/모델/플래그/스키마 각각의 **즉시 복귀** 키 명시
* **데이터 경로**: Dual-Write/Shadow 중단, 레플리카/토픽 재지정, 임시 인덱스/뷰 TTL 제거
* **커뮤니케이션**: 롤백 사실/영향/다음 단계 공지 템플릿( Day 90 ) 사용

### G. 지표·SLO

* `orr_decision_tat_p95 ≤ 15m`, `post_release_incident_rate ↓ ≥ 20%`
* `rollback_latency_p95 ≤ 5m`, `false_go_rate ≤ 2%`, `false_no_go_rate ≤ 5%`
* `tlog_inclusion_gap=0`, 산출물 누락 **0건**

### H. API/CLI(발췌)

* `POST /v1/orr/start { change_set, profile }` — ORR 세션 생성
* `GET  /v1/orr/checklist?id=...` — 항목/상태·증거 링크
* `POST /v1/orr/decide { id, decision, guards[] }` — Go/No-Go 결정
* `POST /v1/orr/exit { id }` — Exit/Back-Out 실행(되돌리기 키 호출)
* CLI: `plura orr start|status|decide|exit`

### I. 운영 체크리스트

* [ ] ORR 체크리스트·증거 링크 **자동 수집**(대시/Trace/리플레이/정책/비용)
* [ ] Go with Guards 시 **가드 플래그/카나리/관찰 창** 확실히 주입
* [ ] No-Go 시 **RCA·보완 계획** 48h 내 작성( Day 80 )
* [ ] 산출물 EPKG-ORR/TLog 포함증명 검증, 고객 요약 공유(필요 시)

---

4. **예시 설명 (모델 v4 + 검색 설정 변경 — Go with Guards, 27분 안정화)**

1) ORR 체크리스트: SLO/보안/주권/비용 모두 녹색, SDG 리스크 4.6(완화 필요).
2) 결정: **Go with Guards** — 카나리 5→25→100%, `search.cache.force_ttl=90s`, 되돌리기 키 등록.
3) 12분 지표 안정, 27분 시점 `prod:stable` 승격. 롤백 시험 불필요, ORR 산출물 EPKG/TLog 고정.
   → 결과: **ORR·게이트·Exit 계획**이 배포 리스크를 구조적으로 낮추고, **신속·투명**한 결정과 **안전한 승격**을 보장.
