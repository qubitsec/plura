# 📘 MSA 개발을 위한 사전 설명 문서

## 6일차 – 개념 이해

**날짜: 6월 17일**

---

## 주제

# **5. 서비스 경계와 도메인 (DDD 맛보기)**

> “어디서, 왜 서비스를 나누는가”

---

## 1️⃣ 서비스 분리는 “기술”이 아니라 “책임”을 나누는 일

MSA에서 가장 흔한 오해는 이것입니다.

* ❌ “기능을 잘게 쪼개면 MSA”
* ✅ “업무 책임(비즈니스 책임)을 분리하면 MSA”

즉, 서비스는 **“코드 덩어리”가 아니라 “업무 책임의 단위”**입니다.

---

## 2️⃣ 서비스 경계(Boundary)란 무엇인가

**서비스 경계**는 다음을 의미합니다.

* 이 서비스가 **무엇을 책임지는지**
* 어디까지가 이 서비스의 **권한/소유권**인지
* 다른 서비스와는 **어떤 계약(API)** 으로 연결되는지

서비스 경계가 명확하면:

* 변경 영향이 줄고
* 배포가 독립적이 되며
* 장애가 격리됩니다.

---

## 3️⃣ DDD에서 말하는 핵심 개념(맛보기)

DDD(도메인 주도 설계)는 한 문장으로 요약하면:

> **비즈니스 언어(도메인 언어)를 코드와 구조에 그대로 반영하자**

그중 MSA와 연결되는 핵심만 뽑으면 다음 3개입니다.

### ✅ 1) 도메인(Domain)

* 비즈니스가 풀고자 하는 문제 영역
* 예: 주문, 결제, 배송, 회원, 정산, 알림

### ✅ 2) 바운디드 컨텍스트(Bounded Context)

* 같은 단어라도 의미가 달라지는 “경계”
* 예: “사용자”라는 단어가

  * 회원 도메인에서는 “가입자”
  * 결제 도메인에서는 “결제 주체”
  * 고객센터 도메인에서는 “문의자”
    처럼 다르게 정의될 수 있음

👉 이 “의미가 달라지는 지점”이 **서비스 분리 후보**입니다.

### ✅ 3) 유비쿼터스 언어(Ubiquitous Language)

* 기획/운영/개발이 **같은 단어**를 같은 의미로 쓰는 것
* 이것이 안 되면:

  * API 이름이 흔들리고
  * 데이터 정의가 흔들리고
  * 결국 서비스 경계가 무너집니다.

---

## 4️⃣ “어디서” 서비스를 나누는가: 실무 기준 5가지

서비스 분해는 정답이 하나가 아니라, **신호를 보고 판단**합니다.

### ① 변경이 자주 함께 일어나는 것끼리 묶기

* A 바꾸면 항상 B도 바꾼다
  → 같은 서비스로 묶는 편이 현실적

### ② 데이터 소유권이 다른 것끼리 분리

* 누가 “진실의 원천(Source of Truth)”인가?
* 주문의 진실은 주문 서비스
* 결제의 진실은 결제 서비스

### ③ 트래픽/부하 패턴이 다른 것끼리 분리

* 알림은 폭주(스파이크)가 흔함
* 검색은 CPU/메모리 소모가 큼
* 결제는 안정성과 정합성이 핵심

👉 확장 요구가 다른 것끼리는 분리 가치가 큼

### ④ 장애 허용 방식이 다른 것끼리 분리

* 결제는 다운되면 큰일
* 추천/알림은 잠시 늦어도 되는 경우가 많음

👉 “중요도/복구 우선순위”가 다르면 분리 가치가 큼

### ⑤ 조직(팀)의 책임 경계와 맞추기

* MSA는 기술보다 운영 전략
* 팀이 소유하고 책임질 수 있게 나눠야 함

---

## 5️⃣ “잘못” 나누면 생기는 문제 (MSA 실패 패턴)

### ❌ 1) 기능 기준 쪼개기(화면/메뉴 단위 분리)

* “회원조회 서비스”, “회원수정 서비스”처럼 나누면
* 결국 DB 공유/강결합이 생김

### ❌ 2) DB를 공유한 채로 서비스만 분리

* 겉으로는 서비스인데 속은 모놀리식
* 장애 전파/배포 종속/데이터 충돌이 그대로 발생

### ❌ 3) 분산 트랜잭션 지옥

* 서비스 경계가 잘못되면
* 사소한 업무 흐름에도 여러 서비스가 동시에 묶이며
* 장애/재시도/중복처리가 폭발합니다.

---

## 6️⃣ 결론: 서비스 경계의 목표는 “독립 운영”이다

서비스를 나누는 이유는 단 하나로 귀결됩니다.

> **각 서비스가 독립적으로 배포되고,
> 독립적으로 확장되고,
> 장애가 격리되며,
> 팀이 책임지고 운영할 수 있게 하기 위해서**

---

## ✅ 오늘의 핵심 요약

* 서비스는 기능이 아니라 **책임(도메인)** 단위다.
* **바운디드 컨텍스트**는 서비스 분리의 가장 강력한 힌트다.
* 경계를 잘못 나누면 MSA는 오히려 더 큰 재앙이 된다.
* 목표는 “서비스 개수”가 아니라 **독립 운영 가능성**이다.

---
