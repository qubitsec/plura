# MSA 개발을 위한 사전 설명 문서

## 10일차 – 개념 이해

**날짜: 6월 24일**

---

## 주제

# **10. API Gateway란 무엇인가**

> “모든 요청이 처음 만나는 단 하나의 관문”

---

## 1️⃣ 왜 MSA에는 ‘입구’가 필요할까

모놀리식에서는 클라이언트가
**하나의 서버**만 호출하면 됐습니다.

하지만 MSA에서는 상황이 달라집니다.

* 서비스 수십 개
* 주소/포트 제각각
* 인증/인가 방식도 다양
* 일부 서비스는 외부에 노출되면 안 됨

이 상태에서 클라이언트가
모든 서비스를 직접 호출하게 하면?

**구조는 바로 무너집니다.**

그래서 등장한 것이 **API Gateway**입니다.

---

## 2️⃣ API Gateway란 무엇인가

**API Gateway**는
클라이언트와 내부 마이크로서비스 사이에 위치한
**단일 진입 지점(Single Entry Point)** 입니다.

```
[ Client ]
    ↓
[ API Gateway ]
    ↓
[ Service A ] [ Service B ] [ Service C ]
```

클라이언트는:

* 내부 서비스 구조를 **전혀 몰라도 됨**
* 항상 **하나의 주소**만 호출

---

## 3️⃣ API Gateway의 핵심 역할

API Gateway는 단순한 프록시가 아닙니다.
MSA에서 **운영 복잡성을 흡수하는 계층**입니다.

### ✅ 1) 라우팅(Routing)

* 요청을 적절한 서비스로 전달
* 버전별 API 분기 처리

---

### ✅ 2) 인증·인가(Auth)

* JWT 검증
* API Key 검증
* OAuth 연계

각 서비스에서 인증 로직을 중복 구현하지 않음

---

### ✅ 3) 공통 정책 적용

* Rate Limiting (속도 제한)
* IP 차단
* 요청 크기 제한
* 공통 헤더 처리

---

### ✅ 4) 응답 조합(Response Aggregation)

* 여러 서비스 호출 결과를
* 하나의 응답으로 합쳐서 반환

클라이언트 호출 수 감소

---

## 4️⃣ API Gateway가 없을 때 생기는 문제

### 1) 클라이언트-서비스 강결합

* 서비스 주소 변경 → 앱 수정 필요
* 서비스 추가/삭제 → 클라이언트 수정

---

### 2) 인증 로직 중복

* 모든 서비스에 인증 코드 존재
* 정책 변경 시 전체 수정 필요

---

### 3) 보안 경계 붕괴

* 내부 서비스가 외부에 직접 노출
* 공격 표면 급격히 증가

---

## 5️⃣ API Gateway와 BFF(Backend For Frontend)

실무에서는 API Gateway를
**BFF 패턴**과 함께 쓰는 경우가 많습니다.

### BFF란?

* 프론트엔드 종류별 전용 백엔드

  * Web BFF
  * Mobile BFF
  * Admin BFF

```
[ Web ]     [ Mobile ]
   ↓            ↓
[ Web BFF ]  [ Mobile BFF ]
        ↓
    [ Services ]
```

화면 요구사항을 서비스에 침투시키지 않기 위함

---

## 6️⃣ API Gateway의 한계와 주의점

### 1) 또 하나의 병목 가능성

* 잘못 설계하면 단일 장애 지점(SPOF)
* 반드시 이중화/확장 고려

---

### 2) 비즈니스 로직 금지

* Gateway에 로직이 쌓이면
  → 또 다른 모놀리식

원칙

> **Gateway는 정책과 흐름만,
> 비즈니스 판단은 서비스에서**

---

## 7️⃣ API Gateway는 언제 필요한가

### ✅ 필요한 시점

* 서비스 수가 늘어나기 시작할 때
* 인증/보안 정책을 통합하고 싶을 때
* 외부 API를 안정적으로 노출해야 할 때

### 아직 불필요한 경우

* 서비스 2~3개
* 내부 PoC 단계
* 트래픽과 보안 요구가 낮음

---

## 8️⃣ 결론: API Gateway는 ‘방어선’이다

API Gateway는 단순한 편의 장치가 아닙니다.

* 내부 구조 보호
* 보안 정책 중앙화
* 클라이언트 단순화
* 운영 복잡성 흡수

> **MSA에서 Gateway는
> “첫 번째 방어선이자 마지막 완충지대”** 입니다.

---

## ✅ 오늘의 핵심 요약

* API Gateway는 MSA의 단일 진입 지점이다.
* 라우팅·인증·보안·정책을 중앙화한다.
* 클라이언트와 서비스의 결합을 끊는다.
* 로직이 쌓이면 또 다른 모놀리식이 된다.
* 확장·이중화 없이는 SPOF가 된다.

---
