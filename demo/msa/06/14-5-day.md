# 📘 MSA 개발을 위한 사전 설명 문서

## 5일차 – 개념 이해

**날짜: 6월 14일**

---

## 주제

# **5. 서비스 경계와 도메인 (DDD 맛보기)**

> “어디서, 왜 서비스를 나누는가”

---

## 1️⃣ 서비스 분리는 ‘기능’이 아니라 ‘책임’을 나누는 일

MSA에서 가장 흔한 오해는 이것입니다.

* ❌ “기능을 잘게 쪼개면 MSA”
* ✅ “업무 책임(비즈니스 책임)을 분리하면 MSA”

서비스는 **코드 덩어리**가 아니라 **책임의 단위**입니다.
즉, *누가 무엇을 책임지고 운영할 것인지*가 경계의 기준입니다.

---

## 2️⃣ 서비스 경계(Boundary)란 무엇인가

**서비스 경계**는 아래 3가지를 명확히 하는 선입니다.

1. 이 서비스가 **무엇을 책임지는지**
2. 이 서비스가 **어떤 데이터를 소유하는지**
3. 다른 서비스와 **어떤 계약(API/이벤트)** 으로 연결되는지

경계가 명확하면:

* 변경 영향이 줄고
* 배포가 독립적이 되고
* 장애가 격리됩니다.

---

## 3️⃣ DDD 핵심 개념 3가지(맛보기)

DDD(도메인 주도 설계)는 한 문장으로 요약하면:

> **비즈니스 언어를 코드와 구조에 그대로 반영한다**

MSA 경계 설정에 특히 중요한 개념은 아래 3개입니다.

### ✅ 1) 도메인(Domain)

비즈니스가 다루는 문제 영역입니다.
예: **회원, 주문, 결제, 배송, 정산, 알림**

---

### ✅ 2) 바운디드 컨텍스트(Bounded Context)

“같은 단어가 다른 의미를 갖는 경계”입니다.

예: “사용자”라는 단어가

* 회원 도메인: 가입자
* 결제 도메인: 결제 주체
* 고객센터: 문의자
  처럼 **정의가 달라지는 지점**이 생깁니다.

👉 이 “정의가 달라지는 지점”이 **서비스 분리 후보**입니다.

---

### ✅ 3) 유비쿼터스 언어(Ubiquitous Language)

기획/운영/개발이 **같은 단어를 같은 의미로** 쓰는 것.

이게 흔들리면:

* API 이름이 흔들리고
* 데이터 정의가 흔들리고
* 결국 서비스 경계가 무너집니다.

---

## 4️⃣ “어디서” 서비스를 나누는가: 실무 기준 5가지

서비스 분리는 정답이 하나가 아니라, **신호를 보고 판단**합니다.

### ① 함께 자주 바뀌는 것끼리 묶기

* A 변경 시 항상 B도 변경된다
  → 분리하면 오히려 비용이 커집니다.

### ② 데이터 소유권이 다른 것끼리 분리

* “진실의 원천(Source of Truth)”이 어디인가?
* 주문의 진실은 주문 서비스, 결제의 진실은 결제 서비스

### ③ 트래픽 패턴이 다른 것끼리 분리

* 알림은 스파이크가 잦고
* 검색은 자원 소모가 크고
* 결제는 안정성이 핵심
  → 확장 요구가 다르면 분리 가치가 큽니다.

### ④ 장애 허용 수준이 다른 것끼리 분리

* 결제는 다운되면 치명적
* 추천/알림은 잠시 늦어도 되는 경우가 많음
  → 중요도/복구 우선순위가 다르면 분리 가치가 큽니다.

### ⑤ 팀 책임 경계와 맞추기

* 서비스는 결국 “운영 책임 단위”
  → 팀이 끝까지 책임질 수 있어야 합니다.

---

## 5️⃣ 잘못 나누면 생기는 문제(실패 패턴)

### ❌ 1) 화면/메뉴 단위로 쪼개기

* “회원조회 서비스 / 회원수정 서비스”처럼 기능 단위 분리는
* 결국 DB 공유·강결합으로 무너집니다.

### ❌ 2) 서비스는 나눴는데 DB를 공유

* 겉은 MSA, 속은 모놀리식
* 장애 전파/배포 종속/스키마 충돌이 그대로 발생

### ❌ 3) 분산 트랜잭션 지옥

* 경계를 잘못 나누면 사소한 업무도 여러 서비스가 동시에 엮이고
* 장애/재시도/중복 처리가 폭발합니다.

---

## 6️⃣ 결론: 서비스 경계의 목표는 “독립 운영”이다

서비스를 나누는 이유는 하나로 귀결됩니다.

> **각 서비스가 독립적으로 배포되고,
> 독립적으로 확장되고,
> 장애가 격리되며,
> 팀이 책임지고 운영할 수 있게 하기 위해서**

---

## ✅ 오늘의 핵심 요약

* 서비스는 기능이 아니라 **책임(도메인)** 단위다.
* **바운디드 컨텍스트**는 서비스 분리의 강력한 힌트다.
* DB 공유는 MSA 실패의 지름길이다.
* 목표는 “서비스 개수”가 아니라 **독립 운영 가능성**이다.

---
