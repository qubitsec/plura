# MSA 개발을 위한 사전 설명 문서

## 14일차 – 개념 이해

**날짜: 6월 28일**

---

## 주제

# **14. 관측 가능성(Observability)**

### 로그 · 메트릭 · 트레이싱

> “보이지 않으면 운영할 수 없다”

---

## 1️⃣ 왜 MSA에서는 ‘관측’이 생존 조건인가

모놀리식에서는 장애가 비교적 단순했습니다.

* 서버가 느리다
* 로그 한 곳 보면 된다
* DB만 보면 원인이 보인다

하지만 MSA에서는 다릅니다.

* 요청이 여러 서비스를 거침
* 일부만 느리거나 실패
* 겉으로는 정상인데 내부는 붕괴 중

**문제가 발생했을 때,
‘어디서 무엇이 왜’ 일어났는지 보이지 않으면
아무 대응도 할 수 없습니다.**

---

## 2️⃣ Observability란 무엇인가

관측 가능성(Observability)은 단순히 “로그를 남긴다”가 아닙니다.

> **외부에서 내부 상태를 추론할 수 있는 능력**

MSA에서는 다음 3가지가 반드시 필요합니다.

* **로그(Logs)** → 무슨 일이 있었는가
* **메트릭(Metrics)** → 얼마나/얼마나 자주
* **트레이싱(Tracing)** → 어디서부터 어디까지

---

## 3️⃣ 로그(Logs): ‘사건 기록’

### 로그의 역할

* 에러 발생 원인 파악
* 상태 변화 기록
* 보안/감사 근거

### MSA 로그의 특징

* 서비스마다 로그가 흩어져 있음
* 단일 서버 로그 조회로는 의미 없음

필수 원칙

* **중앙 수집**
* **구조화 로그(JSON)**
* **요청 ID / Trace ID 포함**

---

## 4️⃣ 메트릭(Metrics): ‘시스템의 맥박’

메트릭은 숫자입니다.

예:

* 요청 수(QPS)
* 오류율(Error Rate)
* 응답 시간(Latency)
* CPU / 메모리 사용량

### 메트릭의 역할

* 이상 징후 조기 감지
* 용량 계획
* 자동 확장(HPA)의 근거

핵심

> **로그는 사후 분석,
> 메트릭은 실시간 감시**

---

## 5️⃣ 트레이싱(Tracing): ‘요청의 여정’

트레이싱은 하나의 요청이
**어떤 서비스를 거쳐 어떻게 처리됐는지**를 보여줍니다.

```
Client
 → Gateway
   → Service A
     → Service B
       → Service C
```

### 트레이싱이 없으면

* “어디가 느린지” 모름
* “누가 병목인지” 모름
* 장애 원인 추정만 반복

분산 시스템에서는 **트레이싱이 사실상 필수**입니다.

---

## 6️⃣ Trace ID의 중요성

모든 요청에는
**하나의 Trace ID**가 있어야 합니다.

* Gateway에서 생성
* 모든 서비스로 전파
* 로그/메트릭/트레이싱에 공통 사용

이것이 없으면
**조각난 로그를 이어 붙일 수 없습니다.**

---

## 7️⃣ 흔한 실패 패턴

### 로그만 있고 메트릭이 없다

→ 장애를 “나고 나서” 안다

### 메트릭만 있고 트레이싱이 없다

→ 느린 건 아는데, 원인을 모른다

### 서비스별 로그 포맷이 다르다

→ 분석 불가능

---

## 8️⃣ 현실적인 도입 우선순위

모든 걸 한 번에 하려 하지 마세요.

### 추천 순서

1. **중앙 로그 수집**
2. **기본 메트릭 대시보드**
3. **Trace ID 전파**
4. **분산 트레이싱 도입**

이 순서만 지켜도 운영 난이도가 급격히 낮아집니다.

---

## 9️⃣ 결론: 관측 없이는 MSA가 아니다

MSA는 “서비스를 나누는 기술”이 아니라
**“운영하는 기술”**입니다.

> **관측이 없는 MSA는
> 눈을 가리고 고속도로를 달리는 것과 같다**

---

## ✅ 오늘의 핵심 요약

* MSA에서는 문제가 보이지 않으면 해결할 수 없다.
* 로그·메트릭·트레이싱은 각각 역할이 다르다.
* Trace ID는 관측의 연결고리다.
* 중앙 수집과 표준화가 필수다.
* 관측은 선택이 아니라 생존 조건이다.

---
