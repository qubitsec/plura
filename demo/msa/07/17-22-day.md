## 22일차 – 쿠버네티스 입문

**날짜: 7월 23일**

---

## 주제

# **22. 쿠버네티스 클러스터 구성요소**

### Control Plane · Node

> “쿠버네티스는 하나의 프로그램이 아니라 **여러 역할의 협업 시스템**이다”

---

## 1️⃣ ‘클러스터’란 무엇인가

쿠버네티스에서 **클러스터(Cluster)** 는 다음의 집합입니다.

* 컨테이너를 **어디에, 몇 개로, 어떻게** 실행할지 결정하는 영역
* 실제로 컨테이너를 **실행하는 영역**

즉,

> **결정하는 쪽(Control Plane)** 과
> **실행하는 쪽(Node)** 이 명확히 나뉘어 있습니다.

---

## 2️⃣ 전체 구조 한눈에 보기

```
[ Control Plane ]
   ├─ API Server
   ├─ Scheduler
   ├─ Controller Manager
   └─ etcd
          ↓
[ Worker Nodes ]
   ├─ kubelet
   ├─ kube-proxy
   └─ Container Runtime
        └─ Pods
```
  
  .  
모든 통신과 제어의 중심은 **API Server**입니다.

---

## 3️⃣ Control Plane의 역할 (두뇌)

Control Plane은
“클러스터가 **어떻게 되어야 하는지**”를 관리합니다.

### ✅ 1) API Server

* 쿠버네티스의 **유일한 진입점**
* 모든 명령(`kubectl`, 자동화 도구)은 여기로 들어옴
* 인증·인가·검증 담당

**사실상 쿠버네티스의 관문**

---

### ✅ 2) Scheduler

* “이 Pod를 **어느 노드에** 올릴까?”
* CPU/메모리/제약 조건을 고려해 결정

배치 결정만 하고, 실행은 하지 않음

---

### ✅ 3) Controller Manager

* “원하는 상태(Desired State)”를 유지하는 관리자
* 예:

  * Pod 수가 줄면 다시 늘림
  * 노드가 죽으면 재배치

**계속 감시하고, 차이를 보정**

---

### ✅ 4) etcd

* 클러스터의 **상태 저장소**
* 모든 설정/상태 정보 저장
* 매우 중요, 매우 민감

etcd가 망가지면
클러스터의 “기억”이 사라짐

---

## 4️⃣ Node(Worker)의 역할 (근육)

Node는 실제로 **컨테이너를 실행**합니다.

### ✅ 1) kubelet

* 노드의 관리자
* Control Plane의 지시를 받아

  * 컨테이너 실행
  * 상태 보고

“이 노드에서 Pod를 이렇게 실행해라”

---

### ✅ 2) Container Runtime

* 실제 컨테이너 실행 엔진
* 예: containerd, CRI-O

Docker는 이제 **직접 구성요소가 아님**
(런타임으로 대체됨)

---

### ✅ 3) kube-proxy

* 네트워크 담당
* Service → Pod 트래픽 전달
* 내부 로드밸런싱 구현

---

## 5️⃣ Pod란 무엇인가 (다음의 핵심 예고)

Node 위에서 직접 실행되는 것은
**컨테이너가 아니라 Pod**입니다.

* Pod = 하나 이상의 컨테이너 묶음
* 같은 네트워크/IP 공유
* 같은 생명주기

**쿠버네티스의 최소 실행 단위**

다음 회차에서 가장 중요하게 다룹니다.

---

## 6️⃣ Control Plane vs Node 요약

| 구분      | Control Plane                    | Node             |
| ------- | -------------------------------- | ---------------- |
| 역할      | 결정·관리                            | 실행               |
| 주요 구성   | API, Scheduler, Controller, etcd | kubelet, runtime |
| 컨테이너 실행 |                                 |                 |
| 장애 영향   | 전체 운영                            | 일부 워크로드          |

---

## 7️⃣ 흔한 오해 정리

### “마스터 서버에 컨테이너가 돈다”

→ 보통 **돌지 않는다** (운영 환경)

### “노드에 직접 명령을 내린다”

→ 모든 제어는 **API Server 경유**

### “쿠버네티스는 단일 프로그램”

→ 여러 컴포넌트의 협업 시스템

---

## 8️⃣ 결론: 쿠버네티스는 ‘분업 구조’다

* Control Plane은 **생각**
* Node는 **실행**
* API Server는 **중앙 통제**
* etcd는 **기억**

> **이 구조를 이해하지 못하면
> 쿠버네티스는 끝까지 어렵다**

---

## ✅ 오늘의 핵심 요약

* 쿠버네티스는 Control Plane과 Node로 나뉜다.  
  .  
* 모든 명령은 API Server를 통해 흐른다.
* Scheduler는 배치만, 실행은 Node가 한다.
* etcd는 클러스터의 기억이다.
* 컨테이너는 Pod 안에서 실행된다.

---
